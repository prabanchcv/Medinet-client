import{P as S,c as w,u as P,j as e,d as $,r as c,a as u,e as F}from"./index-6c023e7e.js";p.propTypes={docData:S.array};function p({docData:l}){const d=w(),h=P(),o=t=>{console.log(t),d($(t)),h("/appointments")};return console.log(l),e.jsx(e.Fragment,{children:e.jsx("div",{className:"d-flex p-3 flex-wrap gap-3",children:l.length>0?l.map((t,r)=>{var i;return e.jsxs("div",{className:"m-3 card  border  shadow-lg",style:{width:"12rem",minHeight:"20rem"},children:[e.jsx("div",{className:"m-auto",style:{width:"100%",height:"10rem"},children:e.jsx("img",{style:{width:"100%",height:"10rem"},src:`http://localhost:3000/images/${t.image}`,className:"card-img-top",alt:"..."})}),e.jsxs("div",{className:"card-body mb-0 ps-2",style:{textAlign:"left",maxWidth:"13rem",left:0},children:[e.jsx("h5",{className:"text-dark",children:t.name}),e.jsxs("p",{className:"ms",style:{fontSize:"13px",color:"black",opacity:"80%"},children:[(i=t==null?void 0:t.doctorData[0])==null?void 0:i.name," ",e.jsx("br",{}),t.qualification]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 mb-2 d-flex justify-content-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"pe-2",children:["Rs.",t.fee]})]})}),e.jsx("button",{className:"btn m-2 mt-0 btn-outline-success",onClick:()=>o(t),children:"Book"})]},r)}):e.jsxs("div",{className:"ms-5",children:[e.jsx("b",{children:"Ooopsie...!"})," ",e.jsx("br",{}),"No doctor found"]})})})}function M(){const[l,d]=c.useState([]),[h,o]=c.useState([]),[t,r]=c.useState(""),[i,m]=c.useState(!1),[j,b]=c.useState([]),[n,g]=c.useState(1),[x,f]=c.useState(1);c.useEffect(()=>{(async()=>{try{const a=await u.get(`http://localhost:3000/findDoctors?page=${n}`);d(a.data.docs),b(a.data.deps),f(Math.ceil(a.data.docs.length/4))}catch(a){console.error(a)}})()},[n]);const N=c.useCallback(async s=>{s.preventDefault(),t?await u.get(`http://localhost:3000/searchDoc/${t}`,{}).then(a=>{o(a.data)}):await u.get("http://localhost:3000/searchDoc/all",{}).then(a=>{console.log(a.data),o(a.data)}),m(!0)},[t]),v=s=>{const a=l.filter(C=>C.doctorData[0].name===s.target.value);o(a),m(!0)},y=()=>{r(""),o([]),m(!1)},D=()=>{g(s=>Math.max(s-1,1))},k=()=>{g(s=>Math.min(s+1,x))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4 col-md-3 bg-light p-1 text-center",children:e.jsxs("div",{className:"outline-success mt-5",children:[e.jsx("h3",{children:"Departments"}),e.jsx("h7",{onClick:y,style:{cursor:"pointer"},children:"clear"}),e.jsx("div",{className:"text-start m-auto ",style:{maxWidth:"300px"},children:e.jsx("ul",{className:"list-group ms-auto ",children:j?j.map(s=>e.jsxs("li",{className:"list-group-item ps-1  pt-2 pb-2 p-0",children:[e.jsx("input",{className:"form-check-input me-1",type:"radio",name:"listGroupRadio",value:s.name,onClick:a=>v(a),id:s.name},s.name),e.jsx("label",{className:"form-check-label",htmlFor:s.name,children:s.name})]},s._id)):e.jsx("div",{children:"No departments available"})})})]})}),e.jsxs("div",{className:"col-8 col-md-9",children:[e.jsxs("div",{className:"d-flex p-4 pb-0",children:[e.jsx("input",{type:"text",className:"my-auto bg-light form-control",style:{maxWidth:"60%"},value:t,onChange:s=>r(s.target.value),placeholder:"Search doctors..."}),e.jsx("button",{className:"btn pt-0 ms-2 btn-success",onClick:N,children:e.jsx(F,{})})]}),i?e.jsx(p,{docData:h}):e.jsx(p,{docData:l}),e.jsxs("div",{className:"d-flex justify-content-center",style:{padding:"20px"},children:[e.jsx("button",{className:"border shadow-lg btn btn-outline-primary me-2",onClick:D,disabled:n===1,children:"Previous"}),e.jsx("span",{children:`Page ${n} of ${x}`}),e.jsx("button",{className:"border shadow-lg  btn btn-outline-primary ms-2",onClick:k,disabled:n===x,children:"Next"})]})]})]})})}export{M as default};
