import{c as A,u as C,b as g,r as i,j as e,t as E,L,B,a as _,f,s as F}from"./index-5eb48504.js";/* empty css                    */function W(){var j;const N=A(),c=C(),s=g(t=>t.selectedDoc.doc),a=g(t=>t.user.data),[v,y]=i.useState([]),[d,b]=i.useState(new Date),[r,S]=i.useState("Time"),[o,w]=i.useState(""),[m,h]=i.useState(["No data"]),[x,D]=i.useState(""),u=i.useRef(!1),p=localStorage.getItem("userToken");i.useEffect(()=>{async function t(){s.doctorData?await _.get(`https://medinet.website/docSchedule/${s._id}`,{headers:{Authorization:`Bearer ${p}`}}).then(n=>{console.log(n.data),n.data==="blocked"?(c("/login"),localStorage.removeItem("userToken")):y(n.data)}):c("/findDoctor")}u.current||(t(),u.current=!0)},[s.doctorData,s._id,c,p]);const k=t=>{b(t);const n=f(t,"dd-MM-yyyy");console.log(2,n);const l=v.filter(M=>M.date.slice(0,10)===n);l.length>0&&l[0].time?(console.log(l[0].time),h(l[0].time)):(h(["No available time for this day"]),console.error("Error: Could not find time for the selected date"))},T=async()=>{if(d===""||r==="Time")w("Please select session date and time");else{const t={doctor:s._id,user:a._id,date:f(d,"dd-MM-yyyy"),time:r,issues:x,fee:s.fee};N(F(t)),c("/payment")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:" slice mx-auto text-center mt-5 p-4 app-div",style:{maxWidth:"800px"},children:[o?e.jsx("div",{className:"mt-3 alert-danger alert",children:o}):"",e.jsx("h3",{children:e.jsx("b",{children:" Book Your Appointments"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 mt-5 text-center",children:e.jsx("h4",{children:e.jsx("b",{children:"Patient Details"})})}),e.jsxs("div",{className:"col-5   text-end",children:[e.jsx("p",{children:" Name :"}),e.jsx("p",{children:" Age :"}),e.jsx("p",{children:" Gender :"}),e.jsx("p",{children:" Address :"}),e.jsx("p",{children:"Health issues :"})]}),e.jsxs("div",{className:"col-7",children:[e.jsx("p",{children:a.userName?a.userName:" "}),e.jsx("p",{children:a==null?void 0:a.age}),e.jsx("p",{children:a.gender?a.gender:" "}),e.jsx("p",{children:a.address?a.address:" "}),e.jsx("textarea",{name:"issues",id:"",value:x,onChange:t=>D(t.target.value),className:"form-control",cols:"30",rows:"5",placeholder:"Enter your health issues here..."})]})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 mt-5 text-center",children:e.jsx("h4",{children:e.jsx("b",{children:"Doctor Details"})})}),e.jsxs("div",{className:"col-12 text-center",children:[e.jsxs("h5",{children:["Dr.",s==null?void 0:s.name]}),e.jsx("div",{className:"text-secondary",children:s.doctorData?(j=s==null?void 0:s.doctorData[0])==null?void 0:j.name:""}),e.jsx("div",{className:"text-secondary",children:s==null?void 0:s.qualification}),e.jsx("div",{children:e.jsxs("b",{children:["Fee : ",e.jsx("span",{className:"text-success",children:s.fee})]})}),e.jsxs("div",{className:"",children:[e.jsx("b",{children:"Session Timing "}),e.jsx("div",{className:"dropdown",children:e.jsx(E,{selected:d,onChange:t=>k(t),dateFormat:"yyyy-MM-dd",minDate:new Date})}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn drpp p-1 bg-light btn-outline-dark mt-2  text-dark dropdown-toggle",style:{maxWidth:"150px",minWidth:"100px",fontSize:"14px"},type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:r}),e.jsx("ul",{className:"dateDrop dropdown-menu",children:m&&m.map((t,n)=>e.jsx("li",{children:e.jsx(L,{className:"appLink",onClick:()=>S(t),children:t})},n))})]})]})]})]})}),e.jsx("div",{className:"col-12 mt-4 d-flex justify-content-center align-items-center",children:e.jsxs("button",{className:"btn p-1 btn-outline-success",onClick:T,children:["Book Appointment ",e.jsx(B,{style:{marginTop:"-2px"}})]})})]})]})})}export{W as default};
